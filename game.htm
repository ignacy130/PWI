<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="utf-8" />
    <title>Personal blog</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">
</head>

<body onload="initialize()"
    <div class="page-wrap">
        <header id="header" class="invert center full-row">
            <nav class="container">
                <a href="index.htm" class="padded">Main</a>
                <a class="padded selected">Game</a>
                <a href="contact.htm" class="padded">Contact</a>
            </nav>
        </header>
        <div id="arrows">
            <a id="left" href="index.htm"> { </a>
            <a id="right" href="contact.htm"> } </a>
        </div>
        <section class="container" id="content">
            <article>
                <header>
                    <h2>
                       Let's play a game!
                   </h2>
                </header>
                <footer>
                    <abbr class="pubDate">
                       5:12 25/03/2015
                    </abbr>
                </footer>
                <div class="padded text">
                <div class="center">
                Try to retype whole 'Lorem ipsum' text! Letter will begin to hide 5 seconds after you focus on textarea below quote!
                </div>
                <div class="quote" id="sourceText">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Proin nibh augue, suscipit a, scelerisque sed, lacinia in, mi. Cras vel lorem. Etiam pellentesque aliquet tellus. Phasellus pharetra nulla ac diam. Quisque semper justo at risus. Donec venenatis, turpis vel hendrerit interdum, dui ligula ultricies purus, sed posuere libero dui id orci. Nam congue, pede vitae dapibus aliquet, elit magna vulputate arcu, vel tempus metus leo non est.
                </div>
                <h4 class="center">Your result:</h4>
                <h3 class="center">
                    <span id='result'>0</span>
                    <span id="percentSymbol">%</span>
                </h3>
                <textarea id='arena' placeholder="Type here..."></textarea>
                
                <div class="separator"></div>
    
    </article>
    </section>
    </div>
    <footer id="footer" class="invert full-row">
        <div class="container text center "> Ignacy Wilczy≈Ñski 2015</div>
    </footer>
</body>
</html>


<script>
    var arena;
    var sourceTextDiv;
    var resultDiv;
    var hidden="";
    var percentSymbol;
    
    function initialize(){
        arena = document.getElementById("arena");
        sourceTextDiv = document.getElementById("sourceText");
        resultDiv = document.getElementById("result");
        percentSymbol = document.getElementById("percentSymbol");
        arena.onfocus = startGame;
    }
    
    function stringNumValue(text){
        var value = 0;
        var l = text.length;
        for(i = 0; i < l; i++)
        {
            var letter = text[i];
            var number = parseInt(letter.charCodeAt(0));
            value += number;
        }
        return value;
    }
    
    var startGame = function(){
        setTimeout(startEating, 000);
    }
    
    var startEating = function(){
        
        setInterval(eat, 500);
    }
    
    var eat = function(){
        var arenaVal = stringNumValue(arena.value);
        if(arenaVal!=0)
        {
            var percent = arenaVal / stringNumValue(hidden);
                resultDiv.innerHTML = Math.round((percent*100));
            percentSymbol.innerHTML = "%";
        }
        else
        {
            resultDiv.innerHTML = "Hey, you still got chances!";
            percentSymbol.innerHTML = "";
        }
        var actualTextLength = sourceTextDiv.innerHTML.length;
        hidden+= sourceTextDiv.innerHTML.substring(0,1);
        var shortened = sourceTextDiv.innerHTML.substring(1, actualTextLength);
        sourceTextDiv.innerHTML = shortened;
    }
    
    
</script>